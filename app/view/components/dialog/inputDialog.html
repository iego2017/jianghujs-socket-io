<script type="text/x-template" id="_InputDialog">
  <div>
    <v-dialog v-model="shown_" scrollable max-width="400px" @click:outside="history.back()">
      <v-card>
        <v-card-title>查找用户</v-card-title>
        <v-divider />
        <v-text-field v-model="searchKeyword" class="ma-3" label="输入用户ID或用户昵称" outlined />
        <v-divider />
        <v-card-actions>
          <v-spacer />
          <v-btn color="primary" text @click="close">取消</v-btn>
          <v-btn color="primary" text @click="done">确认</v-btn>
        </v-card-actions>
      </v-card>
    </v-dialog>
    <v-snackbar v-model="snackbar">
      {{ snackbarText }}
      <template #action="{ attrs }">
        <v-btn color="red" text v-bind="attrs" @click="snackbar = false">Close</v-btn>
      </template>
    </v-snackbar>
  </div>
</script>

<script>
  Vue.component('InputDialog', {
    template: '#_InputDialog',
    vuetify: new Vuetify(),
    model: {
      prop: 'shown',
      event: 'close'
    },
    props: {
      shown: {
        type: Boolean,
        default: false
      },
      ctrlType: {
        type: String,
        default: 'sendFriendMsg'
      }
    },
    data() {
      return {
        shown_: this.shown,
        searchKeyword: null,
        history: window.history,
        snackbarText: '',
        snackbar: false
      };
    },
    watch: {
      shown(v, ov) {
        this.shown_ = v;
      },
      shown_(v, ov) {
        if (!v) {
          this.close();
        }
      }
    },
    created() { },
    methods: {
      close() {
        this.$emit('close', false);
      },
      done() {
        if (this.searchKeyword) {
          this.$emit('close', false);
          this.$emit('done', this.searchKeyword);
        } else {
          this.snackbarText = '请输入用户ID';
          this.snackbar = true;
        }
      }
    }
  });
</script>
<style>
  .friendList {
    max-height: 400px;
    overflow-y: scroll;
  }
</style>